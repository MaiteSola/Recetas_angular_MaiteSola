<form (ngSubmit)="onSubmit()" #recipeForm="ngForm">

  <!-- üîπ T√≠tulo -->
  <div class="mb-3">
    <label for="title" class="form-label">T√≠tulo de la receta</label>
    <input
      type="text"
      class="form-control"
      id="title"
      [(ngModel)]="recipe.name"
      name="title"
      placeholder="Ej: Ensaladilla rusa"
    />

    @if (errors.name) {
      <div class="text-danger mt-1">‚ö†Ô∏è El t√≠tulo es obligatorio.</div>
    }
  </div>

  <!-- üîπ Ingredientes -->
  <div class="mb-3">
    <label class="form-label">Ingredientes</label>

    @for (ingredient of recipe.ingredients; track $index) {
      <div class="input-group mb-2">
        <input
          type="text"
          class="form-control"
          [(ngModel)]="recipe.ingredients[$index]"
          [name]="'ingredient' + $index"
          placeholder="Ej: 2 tazas de harina"
        />
        <button
          type="button"
          class="btn btn-outline-danger"
          (click)="removeIngredient($index)"
        >
          X
        </button>
      </div>
    }

    <button
      type="button"
      class="btn btn-outline-secondary btn-sm"
      (click)="addIngredient()"
      [disabled]="!canAddIngredient()"
    >
      + A√±adir ingrediente
    </button>

    @if (errors.ingredients) {
      <div class="text-danger mt-2">‚ö†Ô∏è Debes a√±adir al menos un ingrediente v√°lido.</div>
    }

    @if (!canAddIngredient()) {
      <div class="text-muted mt-1">‚úã Escribe un ingrediente antes de a√±adir otro.</div>
    }
  </div>

  <!-- üîπ Imagen -->
  <div class="mb-3">
    <label for="image" class="form-label">Imagen (URL)</label>
    <input
      type="text"
      class="form-control"
      id="image"
      [(ngModel)]="recipe.imageUrl"
      name="image"
      placeholder="https://ejemplo.com/imagen.jpg"
    />

    @if (errors.imageUrl) {
      <div class="text-danger mt-1">‚ö†Ô∏è Debes introducir una URL de imagen.</div>
    }
  </div>

  <!-- üîπ Botones -->
  <div class="d-flex justify-content-end gap-2">
    <button type="button" class="btn btn-secondary" (click)="onCancel()">
      Cancelar
    </button>
    <button type="submit" class="btn btn-primary">
      Guardar Receta
    </button>
  </div>

  @if (showGeneralError) {
    <div class="alert alert-danger mt-3">
      ‚ö†Ô∏è Corrige los errores antes de guardar la receta.
    </div>
  }
</form>
